<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button>

        <ion-icon name="person-circle-outline"></ion-icon> 
      </ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>


<ion-content [fullscreen]="true">
  <h1>My Journeys</h1>

    <ion-fab vertical="top" horizontal="end" slot="fixed" edge>
      <ion-fab-button (click) = "onCreate()">
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-fab>

    <ion-modal [isOpen] = "createJourneyAndLeg" >
        <ng-template>
            <ion-content>
              <app-journey-leg-details [journeyLegDetails] = "null" (addJourneyWithLegEvent) = "addJourneyWithLeg($event)"></app-journey-leg-details>
              <ion-item>
                  <ion-button  (click) = "closeCreateDetails()" expand="block">Close</ion-button>
              </ion-item>
            </ion-content>
        </ng-template>
    </ion-modal>
   
    <ion-list inset="true">

      <ion-accordion-group *ngFor = "let j of journeysAndLegs; let i = index" >
        <ion-accordion>
          <ion-item slot="header">
          
              <app-journey [journeyAndLegs]="j"></app-journey>
          </ion-item>

          <ion-list slot="content">

                <ion-item *ngFor = "let leg of j.Legs">
                    <app-journey-leg [journeyLeg]="leg" ></app-journey-leg>
                </ion-item>

                <ion-item>
                  <ion-row>
                      <ion-col size="6">
                      
                      </ion-col>

                        <ion-col size="6">
                          <ion-button color = "success" (click) = "addLegClicked(i )"><span class = "textInList">{{addLegText}}</span></ion-button> <br>
                        </ion-col>
                    </ion-row> 
                </ion-item>

                <ion-modal [isOpen] = "addLegFlag" >
                  <ng-template>
                      <ion-content>
                          
                          <app-journey-leg-details [journeyLegDetails]= "null" [thisJourneyID] = "journeysAndLegs[currentIndex].journeyID" (addLegEvent) = "addLeg($event, journeysAndLegs[currentIndex].Legs)" ></app-journey-leg-details>
      
                          <ion-item>
                              <ion-button (click) = "closeDetails()" expand="block">
                                <ion-icon name="arrow-back-outline"></ion-icon>
                                Back
                              </ion-button>
                          </ion-item>

                      </ion-content>
                  </ng-template>
                </ion-modal>
               
                
          </ion-list>
        </ion-accordion>
      </ion-accordion-group>
    </ion-list>
</ion-content>



 

